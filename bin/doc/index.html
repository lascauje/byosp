
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17: http://docutils.sourceforge.net/" />

    <title>Project Documentation &#8212; Build Your Own Scientific Paper  documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="project-documentation">
<h1>Project Documentation<a class="headerlink" href="#project-documentation" title="Permalink to this headline">¶</a></h1>
<section id="license">
<h2>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h2>
<p>Copyright © 2021 lascauje</p>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
<p>You should have received a copy of the GNU General Public License along with this program. If not, see <a class="reference external" href="https://www.gnu.org/licenses/">https://www.gnu.org/licenses/</a>.</p>
</section>
<section id="philosophy">
<h2>Philosophy<a class="headerlink" href="#philosophy" title="Permalink to this headline">¶</a></h2>
<p>This project implements the <em>Quadratic Inverse Problems in Phase retrieval</em>
from the scientific paper
<a class="reference external" href="https://paperswithcode.com/paper/convex-concave-backtracking-for-inertial">Convex-Concave Backtracking
for Inertial Bregman Proximal Gradient Algorithms in Non-Convex Optimization</a></p>
<p>I have discovered a truly well-written explanation of this,
which this 80 column is too narrow to contain.</p>
<p>Furthermore, the goals were both to implement a scientific paper
and to make a comparison between two programming languages: clojure and python.</p>
<p><strong>This may not be the best clojure (respectively, python) code,
but it is a clojure (respectively, python) code.</strong></p>
</section>
<section id="code-documentation">
<h2>Code Documentation<a class="headerlink" href="#code-documentation" title="Permalink to this headline">¶</a></h2>
<p>For the documentation please visit <a class="reference external" href="clj/bpg.core.html">clojure-doc</a>,
and <a class="reference external" href="py/reference.html">python-doc</a>.</p>
<p>In most function documentation there is: <em>See p.x (y.z)</em>.
It means “see the formula y.z page x of the scientific paper in pdf format”</p>
<p>The BPG acronym stands for Bregman Proximal Gradient.</p>
</section>
<section id="tools">
<h2>Tools<a class="headerlink" href="#tools" title="Permalink to this headline">¶</a></h2>
<p>This section describes the tools used for the clojure (respectively, python) project.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 45%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>tool</p></th>
<th class="head"><p>clojure</p></th>
<th class="head"><p>python</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code (M-x)</p></td>
<td><p>cider-mode</p></td>
<td><p>python-mode</p></td>
</tr>
<tr class="row-odd"><td><p>algebra</p></td>
<td><p>neanderthal</p></td>
<td><p>numpy</p></td>
</tr>
<tr class="row-even"><td><p>build</p></td>
<td><p>leiningen</p></td>
<td><p>poetry, nox</p></td>
</tr>
<tr class="row-odd"><td><p>lint</p></td>
<td><p>cljfmt, eastwood, kondo, kibit</p></td>
<td><p>flake8, darglint, pytype</p></td>
</tr>
<tr class="row-even"><td><p>test</p></td>
<td><p>leiningen, clojure.test</p></td>
<td><p>pytest</p></td>
</tr>
<tr class="row-odd"><td><p>doc</p></td>
<td><p>codox</p></td>
<td><p>sphinx</p></td>
</tr>
</tbody>
</table>
</section>
<section id="how-to-build-it">
<h2>How to Build It?<a class="headerlink" href="#how-to-build-it" title="Permalink to this headline">¶</a></h2>
<p>For the clojure project, the following command runs linters, tests
and produces the documentation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ lein ci
</pre></div>
</div>
<p>Respectively, the following command is for the python project.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ nox
</pre></div>
</div>
<p>The following command builds this documentation.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ./build_doc.sh
</pre></div>
</div>
<p>The following code block describes the system dependencies.
It can be used to build a reproducible environment.
For clojure dependencies (respectively, python), visit
the file <em>project.clj</em> (respectively, <em>pyproject.toml</em>).</p>
<div class="highlight-docker notranslate"><div class="highlight"><pre><span></span><span class="nv">python</span><span class="o">=</span><span class="m">3</span>.9.1
<span class="nv">pip</span><span class="o">=</span><span class="m">20</span>.2.4
<span class="nv">poetry</span><span class="o">=</span><span class="m">1</span>.1.5
<span class="nv">nox</span><span class="o">=</span><span class="m">2020</span>.12.31
<span class="nv">leiningen</span><span class="o">=</span><span class="m">2</span>.9.5
<span class="nv">openjdk</span><span class="o">=</span><span class="m">11</span>.0.10
</pre></div>
</div>
</section>
<section id="benchmark">
<h2>Benchmark<a class="headerlink" href="#benchmark" title="Permalink to this headline">¶</a></h2>
<p>All computations have been run on an (old) computer:
Intel(R) Core(TM) i7-4600U CPU &#64; 2.10GHz, 2 cores, 3GiB, GNU/Linux.</p>
<p>Matrices are of dimension 10, 32, 128, 256, 512, or 1024,
which are duplicated 100 times, and with 1000 iterations.
Matrices are generated through a homemade linear congruential generator.
This ensures that the calculations are the same between
the both clojure and python implementations.</p>
<p>The scientific paper uses only matrices of 10x10 dimension
with 1000 iterations.</p>
<p>The following table is a comparison about execution time.</p>
<p>Results are reported in milliseconds, the lower the better.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>size</p></th>
<th class="head"><p>clojure</p></th>
<th class="head"><p>python</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>10x10</p></td>
<td><p>3579.37</p></td>
<td><p>4534.34</p></td>
</tr>
<tr class="row-odd"><td><p>32x32</p></td>
<td><p>4353.38</p></td>
<td><p>4856.39</p></td>
</tr>
<tr class="row-even"><td><p>128x128</p></td>
<td><p>25305.41</p></td>
<td><p>19917.74</p></td>
</tr>
<tr class="row-odd"><td><p>256x256</p></td>
<td><p>62457.68</p></td>
<td><p>55281.28</p></td>
</tr>
<tr class="row-even"><td><p>512x512</p></td>
<td><p>210053.55</p></td>
<td><p>201830.46</p></td>
</tr>
<tr class="row-odd"><td><p>1024x1024</p></td>
<td><p>986261.71</p></td>
<td><p>966849.65</p></td>
</tr>
</tbody>
</table>
<p>The following table is a comparison about memory usage.</p>
<p>Results are reported in MB, the lower the better.</p>
<p>NB: results below are expressed <strong>without</strong> the repl memory footprint.
The clojure repl consumes about 500MB, and the python one 22MB.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 33%" />
<col style="width: 33%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>size</p></th>
<th class="head"><p>clojure</p></th>
<th class="head"><p>python</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>10x10</p></td>
<td><p>42</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>32x32</p></td>
<td><p>73</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-even"><td><p>128x128</p></td>
<td><p>320</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-odd"><td><p>256x256</p></td>
<td><p>401</p></td>
<td><p>55</p></td>
</tr>
<tr class="row-even"><td><p>512x512</p></td>
<td><p>835</p></td>
<td><p>203</p></td>
</tr>
<tr class="row-odd"><td><p>1024x1024</p></td>
<td><p>844</p></td>
<td><p>770</p></td>
</tr>
</tbody>
</table>
<section id="how-to-benchmark-it">
<h3>How to Benchmark It?<a class="headerlink" href="#how-to-benchmark-it" title="Permalink to this headline">¶</a></h3>
<p>For the clojure execution time benchmark,
the following commands have been used.
<em>N</em> represents the matrix dimension, here 10, 32, 128, 256, 512 and 1024.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ lein repl
</pre></div>
</div>
<div class="highlight-clojure notranslate"><div class="highlight"><pre><span></span><span class="nv">bpg.core=&gt;</span> <span class="p">(</span><span class="nf">bench</span> <span class="nv">N</span><span class="p">)</span>
</pre></div>
</div>
<p>Respectively, for the python benchmark.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ poetry run python
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">bpg</span> <span class="kn">import</span> <span class="n">bpg</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">bpg</span><span class="o">.</span><span class="n">bench</span><span class="p">(</span><span class="n">N</span><span class="p">)</span>
</pre></div>
</div>
<p>For the memory usage benchmark, the <em>htop</em> command line has been used
to monitor manually clojure (respectively, python) process
from the repl start to the end of the computation.</p>
</section>
</section>
<section id="a-salute">
<h2>A Salute<a class="headerlink" href="#a-salute" title="Permalink to this headline">¶</a></h2>
<p>The repl driven development in clojure was a little bit of honey
thanks to cider-mode, and I think that
the python ecosystem is more mature (tools, documentations, etc.)</p>
<p>The design was first implemented in clojure, and then in python.</p>
<p>The first benchmark is quite about neanderthal and numpy framework, while
the second is about clojure (respectively, python) core language.</p>
<p>Even though the execution time (respectively, memory usage)
is very similar between the both languages,
python remains the fastest and consumes less memory than clojure.</p>
<p>NB: neanderthal is <em>work in progress</em>, with 13 contributors,
whereas numpy is <em>stable version</em> with more than 1,100 contributors.</p>
<p>Furthermore, the clojure repl memory footprint is <strong>heavy</strong>!
It’s partly because it starts a local server to allow
interactive development (repl driven development, live debugging, etc.)
But ok, it’s always too much. Could graalvm do better?</p>
<p>Any suggestion is welcome, feel free to open a pull request.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>M.C. Mukkamala and P. Ochs and T. Pock and S. Sabach. 2019.
<a class="reference external" href="https://paperswithcode.com/paper/convex-concave-backtracking-for-inertial">Convex-Concave Backtracking
for Inertial Bregman Proximal Gradient Algorithms in Non-Convex Optimization</a></p></li>
<li><p>Daniel Higginbotham. 2015.
<a class="reference external" href="https://www.braveclojure.com/">Clojure for the Brave and True</a></p></li>
<li><p>Dragan Djuric. 2021.
<a class="reference external" href="https://neanderthal.uncomplicate.org/">Neanderthal, Fast native-speed matrix and linear algebra in Clojure</a></p></li>
<li><p>Claudio Jolowicz. 2020.
<a class="reference external" href="https://cjolowicz.github.io/posts/hypermodern-python-01-setup/">Hypermodern Python</a></p></li>
<li><p>al. 2021.
<a class="reference external" href="https://numpy.org/">Numpy, The fundamental package for scientific computing with Python</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">Build Your Own Scientific Paper</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>